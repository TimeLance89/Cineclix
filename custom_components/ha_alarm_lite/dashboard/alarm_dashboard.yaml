title: Alarm
views:
  - title: Steuerung
    path: alarm
    icon: mdi:shield-home
    cards:
      - type: tile
        entity: alarm_control_panel.ha_alarm_lite
        name: Alarmanlage
      - type: grid
        columns: 3
        square: false
        cards:
          - type: button
            name: Arm Away
            icon: mdi:shield-check
            tap_action:
              action: call-service
              service: alarm_control_panel.alarm_arm_away
              target: { entity_id: alarm_control_panel.ha_alarm_lite }
          - type: button
            name: Arm Home
            icon: mdi:home-lock
            tap_action:
              action: call-service
              service: alarm_control_panel.alarm_arm_home
              target: { entity_id: alarm_control_panel.ha_alarm_lite }
          - type: button
            name: Disarm
            icon: mdi:shield-off
            tap_action:
              action: call-service
              service: alarm_control_panel.alarm_disarm
              target: { entity_id: alarm_control_panel.ha_alarm_lite }

  - title: Onboarding & Health
    path: alarm-onboarding
    icon: mdi:playlist-check
    cards:
      - type: markdown
        content: |
          # Onboarding & Selbsttest
          1. **Optionen** öffnen (Integration) und Geräte/Delays/Tag/MP3 setzen.
          2. Scanne jetzt deinen **NFC-Tag** → das Feld in den **Optionen** wird automatisch mit dem **letzten Scan** vorbelegt.
          3. Unten siehst du die aktuelle Konfiguration und Health.
          4. Nutze die **Tests** (Indicator, Sirene, Arm, Disarm, Trigger).

      - type: entities
        title: Konfiguration (Status)
        entities:
          - entity: alarm_control_panel.ha_alarm_lite
            name: Zustand
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: configured
            name: configured
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: healthy
            name: healthy
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: health_reasons
            name: health_reasons
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: last_tag_id
            name: last_tag_id
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: last_tag_at
            name: last_tag_at
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: last_sensor_at
            name: last_sensor_at
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: indicator_light
            name: indicator_light
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: siren_player
            name: siren_player
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: mp3_source
            name: mp3_source
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: entry_sensors
            name: entry_sensors
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: exit_delay
            name: exit_delay
          - type: attribute
            entity: alarm_control_panel.ha_alarm_lite
            attribute: entry_delay
            name: entry_delay

      - type: grid
        title: Selbsttest
        columns: 3
        square: false
        cards:
          - type: button
            name: Test Indicator
            icon: mdi:lightbulb-on
            tap_action:
              action: call-service
              service: ha_alarm_lite.test_indicator
              data: { times: 2, color: yellow }
          - type: button
            name: Test Sirene
            icon: mdi:volume-high
            tap_action:
              action: call-service
              service: ha_alarm_lite.test_siren
              data: { times: 1 }
          - type: button
            name: Arm (Exit Delay)
            icon: mdi:shield-check
            tap_action:
              action: call-service
              service: ha_alarm_lite.arm_exit_delay
          - type: button
            name: Disarm
            icon: mdi:shield-off
            tap_action:
              action: call-service
              service: ha_alarm_lite.disarm
          - type: button
            name: Trigger
            icon: mdi:alarm-light
            tap_action:
              action: call-service
              service: ha_alarm_lite.trigger_alarm
          - type: button
            name: Health Check jetzt
            icon: mdi:heart-pulse
            tap_action:
              action: call-service
              service: ha_alarm_lite.health_check