# HA Alarm Pro - Dashboard Panel Configuration
# This file defines the Lovelace dashboard for the alarm system

type: vertical-stack
cards:
  # Conditional warning card when alarm is triggered
  - type: conditional
    conditions:
      - entity: alarm_control_panel.ha_alarm_pro
        state: triggered
    card:
      type: markdown
      content: |
        ## ðŸ”´ ALARM AUSGELÃ–ST
        Quittiere den Alarm mit **â€žAlarm quittieren"** oder per NFC-Tag.
      card_mod:
        style: |
          ha-card {
            background-color: rgba(255, 0, 0, 0.2);
            border: 2px solid red;
          }

  # Status section
  - type: entities
    title: Alarm-Status
    show_header_toggle: false
    state_color: true
    entities:
      - entity: alarm_control_panel.ha_alarm_pro
        name: Alarmanlage
      - type: attribute
        entity: alarm_control_panel.ha_alarm_pro
        attribute: entry_delay_active
        name: EintrittsverzÃ¶gerung aktiv
        icon: mdi:timer-sand
      - type: attribute
        entity: alarm_control_panel.ha_alarm_pro
        attribute: last_trigger_source
        name: Letzte AuslÃ¶sung
        icon: mdi:alert-circle

  # Control buttons
  - type: horizontal-stack
    cards:
      - type: button
        name: Scharf (Abwesend)
        icon: mdi:shield-lock
        tap_action:
          action: call-service
          service: alarm_control_panel.alarm_arm_away
          target:
            entity_id: alarm_control_panel.ha_alarm_pro
        hold_action:
          action: more-info
        entity: alarm_control_panel.ha_alarm_pro
        show_state: false
        
      - type: button
        name: Scharf (Zuhause)
        icon: mdi:shield-home
        tap_action:
          action: call-service
          service: alarm_control_panel.alarm_arm_home
          target:
            entity_id: alarm_control_panel.ha_alarm_pro
        hold_action:
          action: more-info
        entity: alarm_control_panel.ha_alarm_pro
        show_state: false

  - type: horizontal-stack
    cards:
      - type: button
        name: Unscharf
        icon: mdi:shield-off
        tap_action:
          action: call-service
          service: alarm_control_panel.alarm_disarm
          target:
            entity_id: alarm_control_panel.ha_alarm_pro
        hold_action:
          action: more-info
        entity: alarm_control_panel.ha_alarm_pro
        show_state: false
        
      - type: button
        name: Alarm testen
        icon: mdi:alarm-light
        tap_action:
          action: call-service
          service: ha_alarm_pro.test_alarm
          target:
            entity_id: alarm_control_panel.ha_alarm_pro
        hold_action:
          action: more-info
        entity: alarm_control_panel.ha_alarm_pro
        show_state: false

      - type: button
        name: Alarm quittieren
        icon: mdi:bell-cancel
        tap_action:
          action: call-service
          service: alarm_control_panel.alarm_disarm
          target:
            entity_id: alarm_control_panel.ha_alarm_pro
        hold_action:
          action: more-info
        entity: alarm_control_panel.ha_alarm_pro
        show_state: false
        
      - type: button
        name: Sound testen
        icon: mdi:volume-high
        tap_action:
          action: call-service
          service: ha_alarm_pro.test_alarm_sound
          target:
            entity_id: alarm_control_panel.ha_alarm_pro
        hold_action:
          action: more-info
        entity: alarm_control_panel.ha_alarm_pro
        show_state: false

  # Sensors and lights section (dynamically populated)
  - type: entities
    title: Sensoren & Indikatoren
    show_header_toggle: false
    state_color: true
    entities: []
    # This will be populated dynamically based on configuration

  # Logbook section
  - type: logbook
    title: Alarm-Historie
    hours_to_show: 6
    entities:
      - alarm_control_panel.ha_alarm_pro
    # Additional entities will be added dynamically
