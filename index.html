<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Buchfinder ‚Äì Dein pers√∂nlicher Literatur-Guide</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      color-scheme: light;
      --bg: #f7f8ff;
      --card: rgba(255, 255, 255, 0.88);
      --accent: #5e4af1;
      --accent-strong: #4c39d0;
      --text: #13131f;
      --muted: #6a6b7c;
      --border: rgba(94, 74, 241, 0.16);
      --shadow: 0 40px 70px -40px rgba(25, 30, 90, 0.45);
      --radius-xl: 32px;
      --radius-lg: 24px;
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: radial-gradient(circle at top left, rgba(94, 74, 241, 0.15) 0%, transparent 42%),
        radial-gradient(circle at 90% 10%, rgba(250, 167, 93, 0.18) 0%, transparent 55%),
        var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: clamp(2.5rem, 6vw, 4rem) clamp(1.2rem, 4vw, 2.5rem);
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      inset: auto auto 10% 65%;
      width: min(520px, 38vw);
      aspect-ratio: 1 / 1;
      background: radial-gradient(circle at 60% 40%, rgba(94, 74, 241, 0.25), transparent 68%);
      filter: blur(0px);
      opacity: 0.9;
      pointer-events: none;
      animation: float 18s ease-in-out infinite alternate;
      z-index: -1;
    }

    @keyframes float {
      from { transform: translate3d(-12px, -14px, 0) scale(1.04); }
      to { transform: translate3d(14px, 16px, 0) scale(0.98); }
    }

    .app {
      width: min(1100px, 100%);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.96), rgba(244, 245, 255, 0.92));
      backdrop-filter: blur(20px);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    header.hero {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: clamp(2rem, 5vw, 3.5rem);
      padding: clamp(3rem, 6vw, 4.5rem) clamp(2.8rem, 6vw, 4.5rem);
      background: radial-gradient(circle at 15% 30%, rgba(255, 255, 255, 0.24), transparent 68%),
        linear-gradient(135deg, #6350ff 0%, #8b5cff 55%, #b873ff 100%);
      color: #fff;
      position: relative;
    }

    .hero::after {
      content: '';
      position: absolute;
      inset: auto -12% -30% auto;
      width: clamp(220px, 28vw, 360px);
      aspect-ratio: 1;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
      opacity: 0.7;
      filter: blur(0px);
      pointer-events: none;
    }

    .hero-content h1 {
      font-family: 'Playfair Display', 'Times New Roman', serif;
      font-size: clamp(2.6rem, 5vw, 3.6rem);
      margin: 0 0 1rem;
      line-height: 1.1;
    }

    .hero-content p {
      margin: 0 0 2.2rem;
      max-width: 480px;
      font-size: clamp(1rem, 2vw, 1.1rem);
      color: rgba(255, 255, 255, 0.85);
    }

    .eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.85rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.75);
      margin-bottom: 1.2rem;
    }

    .hero-visual {
      background: rgba(22, 21, 61, 0.3);
      border-radius: var(--radius-lg);
      padding: clamp(1.6rem, 3vw, 2.4rem);
      display: grid;
      gap: 1.2rem;
      align-content: start;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.25);
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.08);
      font-size: 0.95rem;
      font-weight: 500;
    }

    .hero-list {
      display: grid;
      gap: 0.8rem;
      padding: 0;
      margin: 0;
      list-style: none;
      font-size: 0.95rem;
      color: rgba(255, 255, 255, 0.85);
    }

    .hero-list li {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 0.75rem;
      align-items: center;
    }

    .hero-list span.icon {
      font-size: 1.1rem;
    }

    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      padding: 0.95rem 1.6rem;
      border-radius: 999px;
      background: #fff;
      color: #3325ae;
      font-weight: 600;
      font-size: 1rem;
      letter-spacing: 0.01em;
      border: none;
      cursor: pointer;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      box-shadow: 0 18px 36px -22px rgba(12, 8, 55, 0.7);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 18px 40px -18px rgba(12, 8, 55, 0.65);
    }

    main {
      padding: clamp(2.8rem, 6vw, 4.5rem);
      background: transparent;
      display: grid;
      gap: clamp(2.5rem, 5vw, 3.5rem);
    }

    .quiz-wrapper {
      display: grid;
      gap: clamp(1.8rem, 3vw, 2.4rem);
    }

    .quiz-card {
      background: var(--card);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(103, 90, 241, 0.14);
      padding: clamp(2rem, 4vw, 2.75rem);
      box-shadow: 0 24px 50px -32px rgba(26, 24, 70, 0.28);
      display: grid;
      gap: 1.6rem;
      position: relative;
      overflow: hidden;
    }

    .quiz-card::after {
      content: '';
      position: absolute;
      inset: -40% auto auto -35%;
      width: clamp(240px, 40vw, 420px);
      aspect-ratio: 1;
      background: radial-gradient(circle at center, rgba(94, 74, 241, 0.12), transparent 65%);
      pointer-events: none;
    }

    .quiz-progress {
      display: flex;
      align-items: center;
      gap: 0.85rem;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .progress-bar {
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: rgba(94, 74, 241, 0.12);
      overflow: hidden;
    }

    .progress-bar span {
      display: block;
      height: 100%;
      width: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, #5e4af1, #8b5cff);
      transition: width 0.35s ease;
    }

    h2.question-title {
      margin: 0;
      font-size: clamp(1.6rem, 3vw, 2rem);
      letter-spacing: -0.01em;
    }

    p.question-desc {
      margin: 0;
      color: var(--muted);
      font-size: 1rem;
      max-width: 540px;
    }

    .option-grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .option {
      position: relative;
      border-radius: 20px;
      padding: 1.2rem 1.25rem;
      background: rgba(255, 255, 255, 0.82);
      border: 1px solid rgba(94, 74, 241, 0.1);
      box-shadow: 0 12px 30px -20px rgba(27, 25, 68, 0.35);
      text-align: left;
      transition: border-color 0.3s ease, transform 0.3s ease;
      cursor: pointer;
      display: grid;
      gap: 0.55rem;
    }

    .option:hover,
    .option:focus-visible {
      transform: translateY(-3px);
      border-color: rgba(94, 74, 241, 0.4);
      outline: none;
    }

    .option.selected {
      border-color: rgba(94, 74, 241, 0.8);
      background: linear-gradient(135deg, rgba(94, 74, 241, 0.18), rgba(139, 92, 255, 0.12));
    }

    .option-title {
      font-weight: 600;
      font-size: 1.05rem;
    }

    .option-desc {
      color: var(--muted);
      font-size: 0.95rem;
      line-height: 1.45;
    }

    .actions {
      display: flex;
      gap: 1rem;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    .ghost-btn {
      background: transparent;
      color: var(--muted);
      border: none;
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
      padding: 0.75rem 0.5rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .ghost-btn:hover {
      color: var(--accent);
    }

    .result-card {
      display: none;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 2.4rem;
      align-items: start;
    }

    .result-card.active {
      display: grid;
    }

    .result-media {
      position: relative;
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 28px 60px -35px rgba(27, 26, 80, 0.55);
    }

    .result-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .result-media::after {
      content: '';
      position: absolute;
      inset: auto 12% -18% 12%;
      height: 65px;
      background: rgba(255, 255, 255, 0.46);
      filter: blur(28px);
      z-index: -1;
    }

    .result-content {
      display: grid;
      gap: 1.4rem;
    }

    .result-content h3 {
      margin: 0;
      font-size: clamp(1.8rem, 3vw, 2.2rem);
    }

    .result-meta {
      display: inline-flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .result-description {
      margin: 0;
      font-size: 1rem;
      line-height: 1.6;
      color: #3d3d4f;
    }

    .highlights {
      padding: 1.2rem 1.4rem;
      border-radius: 20px;
      background: rgba(94, 74, 241, 0.08);
      border: 1px solid rgba(94, 74, 241, 0.14);
      display: grid;
      gap: 0.75rem;
      font-size: 0.95rem;
    }

    .restart {
      justify-self: start;
    }

    @media (max-width: 720px) {
      header.hero {
        border-radius: 0 0 var(--radius-xl) var(--radius-xl);
      }

      .hero-visual {
        order: -1;
      }

      .option-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="hero">
      <div class="hero-content">
        <div class="eyebrow">Alles in einer Experience</div>
        <h1>Finde das Buch, das heute perfekt zu dir passt.</h1>
        <p>Beantworte ein paar inspirierende Fragen und lass unseren Buchfinder deine n√§chste Lekt√ºre entdecken ‚Äì von Fachwissen
          f√ºr die Karriere bis zu Geschichten zum Wegtr√§umen.</p>
        <button class="btn-primary" id="startQuiz">
          Jetzt Empfehlung starten
          <span aria-hidden="true">‚Üí</span>
        </button>
      </div>
      <aside class="hero-visual" aria-label="Highlights der Buchsuche">
        <div class="hero-badge">üìö Intelligente Buchdatenbank</div>
        <ul class="hero-list">
          <li><span class="icon">üéØ</span> <span>Analyse deiner Ziele & Stimmung</span></li>
          <li><span class="icon">üß†</span> <span>Fachliteratur & Fiction gleicherma√üen</span></li>
          <li><span class="icon">‚ú®</span> <span>Pr√§zise Empfehlungen mit Storytelling</span></li>
        </ul>
      </aside>
    </header>

    <main>
      <section class="quiz-wrapper">
        <article class="quiz-card" id="questionCard" aria-live="polite" aria-atomic="true" hidden>
          <div class="quiz-progress">
            <span id="stepLabel">Frage 1 von 5</span>
            <div class="progress-bar"><span id="progressBar"></span></div>
          </div>
          <div>
            <h2 class="question-title" id="questionTitle">Wof√ºr suchst du ein Buch?</h2>
            <p class="question-desc" id="questionDesc">Wir wollen wissen, wohin dich deine n√§chste Lekt√ºre bringen darf.</p>
          </div>
          <div class="option-grid" id="optionGrid"></div>
          <div class="actions">
            <button class="ghost-btn" id="backBtn" type="button" hidden>
              ‚Üê Zur√ºck
            </button>
            <button class="btn-primary" id="nextBtn" type="button">
              Weiter
              <span aria-hidden="true">‚Üí</span>
            </button>
          </div>
        </article>

        <article class="quiz-card result-card" id="resultCard" hidden>
          <div class="result-media">
            <img id="resultImage" src="" alt="Cover des empfohlenen Buchs">
          </div>
          <div class="result-content">
            <div>
              <div class="eyebrow" style="color: var(--accent-strong);">Dein Match</div>
              <h3 id="resultTitle">Titel</h3>
              <div class="result-meta" id="resultMeta"></div>
            </div>
            <p class="result-description" id="resultDescription"></p>
            <div class="highlights" id="resultHighlights"></div>
            <button class="btn-primary restart" id="restartBtn" type="button">Noch einmal starten</button>
          </div>
        </article>
      </section>
    </main>
  </div>

  <script>
    const questions = [
      {
        id: 'goal',
        title: 'Wof√ºr suchst du gerade ein Buch?',
        description: 'Ob beruflich, f√ºrs Studium oder einfach zum Abschalten ‚Äì dein Ziel bestimmt den Fokus.',
        options: [
          {
            value: 'career',
            title: 'Beruflich wachsen',
            description: 'Strategien, Produktivit√§t, Leadership und Skills, die dich weiterbringen.'
          },
          {
            value: 'learn',
            title: 'Etwas Neues lernen',
            description: 'Fundierte Sachb√ºcher, die Wissen vertiefen und Horizonte erweitern.'
          },
          {
            value: 'escape',
            title: 'Abschalten & Abtauchen',
            description: 'Geschichten, die dich in andere Welten tragen und den Alltag vergessen lassen.'
          },
          {
            value: 'emotions',
            title: 'Gef√ºhl & Inspiration',
            description: 'Literarische Reisen mit gro√üen Emotionen und pers√∂nlicher Tiefe.'
          }
        ]
      },
      {
        id: 'mood',
        title: 'Welche Stimmung w√ºnschst du dir?',
        description: 'Wir stimmen die Tonalit√§t des Buches auf deinen aktuellen Vibe ab.',
        options: [
          { value: 'motivated', title: 'Energiegeladen & motivierend', description: 'Power, Drive und kluge Ideen f√ºr die n√§chsten Schritte.' },
          { value: 'calm', title: 'Ruhig & reflektiert', description: 'Sanfte, tiefgr√ºndige Texte zum Entschleunigen.' },
          { value: 'thrilling', title: 'Spannend & fesselnd', description: 'Pageturner mit Plot-Twists und starkem Tempo.' },
          { value: 'wonder', title: 'Magisch & vision√§r', description: 'Fantastische Settings, Zukunftsszenarien oder surreale Welten.' }
        ]
      },
      {
        id: 'complexity',
        title: 'Wie komplex darf es sein?',
        description: 'Wir ber√ºcksichtigen, wie tief die Inhalte gehen und wie konzentriert du lesen m√∂chtest.',
        options: [
          { value: 'light', title: 'Leicht & zug√§nglich', description: 'Klare Sprache, kurze Kapitel ‚Äì perfekt f√ºr zwischendurch.' },
          { value: 'medium', title: 'Gut strukturiert', description: 'Ausgewogenes Tempo, solide Tiefe und viel Praxis.' },
          { value: 'deep', title: 'Anspruchsvoll & analytisch', description: 'Dichte Inhalte f√ºr intensives Lesen und neue Perspektiven.' }
        ]
      },
      {
        id: 'setting',
        title: 'Welche Welt m√∂chtest du erkunden?',
        description: 'Vom Hier & Jetzt bis ins Fantastische ‚Äì deine Vorliebe z√§hlt.',
        options: [
          { value: 'realistic', title: 'Reale Gegenwart', description: 'Authentische Szenarien, Sachbuch oder zeitgen√∂ssische Romane.' },
          { value: 'future', title: 'Zukunft & Technik', description: 'Visionen, Innovation und ein Blick nach vorn.' },
          { value: 'historical', title: 'Geschichte & Vergangenheit', description: 'Epochenreisen, Biografien und historische Romane.' },
          { value: 'fantasy', title: 'Fantastische Welten', description: 'Mythen, Magie und epische Abenteuer.' }
        ]
      },
      {
        id: 'length',
        title: 'Wie viel Lesezeit bringst du mit?',
        description: 'So finden wir das Format, das zu deinem Alltag passt.',
        options: [
          { value: 'short', title: 'Kurz & knackig', description: 'Bis 250 Seiten oder schnell konsumierbar.' },
          { value: 'standard', title: 'Ausgewogen', description: '300‚Äì450 Seiten, ein gutes Gleichgewicht.' },
          { value: 'long', title: 'Eintauchen & verweilen', description: 'Epische Stoffe √ºber 500 Seiten oder mehrb√§ndig.' }
        ]
      }
    ];

    const bookDatabase = [
      {
        id: 'deep-work',
        title: 'Deep Work',
        author: 'Cal Newport',
        type: 'fachliteratur',
        goal: ['career', 'learn'],
        mood: ['motivated', 'calm'],
        complexity: 'medium',
        setting: ['realistic'],
        length: 'standard',
        description: 'Ein fokussierter Leitfaden f√ºr produktives Arbeiten im digitalen Zeitalter. Newport zeigt Strategien, um Ablenkungen zu minimieren und echte Konzentration zu kultivieren.',
        image: 'https://images.unsplash.com/photo-1521587760476-6c12a4b040da?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'think-again',
        title: 'Think Again',
        author: 'Adam Grant',
        type: 'fachliteratur',
        goal: ['learn', 'career'],
        mood: ['motivated'],
        complexity: 'light',
        setting: ['realistic', 'future'],
        length: 'short',
        description: 'Organisationspsychologe Adam Grant ermutigt dazu, die eigene Meinung zu hinterfragen und Neuem offen zu begegnen. Ein inspirierender Perspektivwechsel mit vielen Praxisbeispielen.',
        image: 'https://images.unsplash.com/photo-1455884981818-54cb785db6fc?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'atomic-habits',
        title: 'Die 1% Methode',
        author: 'James Clear',
        type: 'fachliteratur',
        goal: ['career', 'learn'],
        mood: ['motivated'],
        complexity: 'light',
        setting: ['realistic'],
        length: 'short',
        description: 'Ein Bestseller √ºber den Aufbau guter Gewohnheiten. Mit klaren Modellen und sofort anwendbaren Schritten f√ºr nachhaltige Ver√§nderung.',
        image: 'https://images.unsplash.com/photo-1495446815901-a7297e633e8d?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'educated',
        title: 'Befreit',
        author: 'Tara Westover',
        type: 'fachliteratur',
        goal: ['learn', 'emotions'],
        mood: ['calm'],
        complexity: 'medium',
        setting: ['historical', 'realistic'],
        length: 'standard',
        description: 'Eine bewegende Memoire √ºber Bildung, Selbstbestimmung und den Mut, sich vom eigenen Ursprung zu l√∂sen ‚Äì poetisch und inspirierend zugleich.',
        image: 'https://images.unsplash.com/photo-1516979187457-637abb4f9353?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'project-hail-mary',
        title: 'Der Astronaut',
        author: 'Andy Weir',
        type: 'unterhaltung',
        goal: ['escape'],
        mood: ['thrilling', 'wonder'],
        complexity: 'medium',
        setting: ['future'],
        length: 'long',
        description: 'Ein Lehrer wacht allein in einem Raumschiff auf und muss die Menschheit retten. Wissenschaft trifft auf Humor in diesem Sci-Fi-Abenteuer.',
        image: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'night-circus',
        title: 'Der Nachtzirkus',
        author: 'Erin Morgenstern',
        type: 'unterhaltung',
        goal: ['escape', 'emotions'],
        mood: ['wonder'],
        complexity: 'medium',
        setting: ['fantasy', 'historical'],
        length: 'standard',
        description: 'Ein geheimnisvoller Zirkus erscheint nur bei Nacht ‚Äì voller Magie, Rivalit√§t und einer zarten Liebesgeschichte. Atmosph√§risch und traumhaft.',
        image: 'https://images.unsplash.com/photo-1478720568477-152d9b164e26?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'where-crawdads',
        title: 'Der Gesang der Flusskrebse',
        author: 'Delia Owens',
        type: 'unterhaltung',
        goal: ['escape', 'emotions'],
        mood: ['calm', 'thrilling'],
        complexity: 'medium',
        setting: ['realistic'],
        length: 'standard',
        description: 'Naturbeschreibungen, Coming-of-Age und ein Kriminalfall in einem. Ein Roman, der lange nachhallt.',
        image: 'https://images.unsplash.com/photo-1507842217343-583bb7270b66?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'sapiens',
        title: 'Eine kurze Geschichte der Menschheit',
        author: 'Yuval Noah Harari',
        type: 'fachliteratur',
        goal: ['learn'],
        mood: ['calm'],
        complexity: 'deep',
        setting: ['historical', 'future'],
        length: 'long',
        description: 'Harari entfaltet die Geschichte der Spezies Mensch ‚Äì umfassend, analytisch und voller Denkanst√∂√üe f√ºr Gegenwart und Zukunft.',
        image: 'https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'song-achilles',
        title: 'Das Lied des Achill',
        author: 'Madeline Miller',
        type: 'unterhaltung',
        goal: ['escape', 'emotions'],
        mood: ['wonder', 'calm'],
        complexity: 'medium',
        setting: ['historical', 'fantasy'],
        length: 'standard',
        description: 'Eine poetische Neuerz√§hlung des trojanischen Krieges aus Sicht des Patroklos. Zart, heroisch und herzzerrei√üend.',
        image: 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?auto=format&fit=crop&w=700&q=80'
      },
      {
        id: 'factfulness',
        title: 'Factfulness',
        author: 'Hans Rosling',
        type: 'fachliteratur',
        goal: ['learn', 'career'],
        mood: ['motivated', 'calm'],
        complexity: 'light',
        setting: ['realistic'],
        length: 'standard',
        description: 'Ein optimistisches, datenbasiertes Buch √ºber den Zustand der Welt ‚Äì entlarvt Denkirrt√ºmer und liefert Klarheit.',
        image: 'https://images.unsplash.com/photo-1454165205744-3b78555e5572?auto=format&fit=crop&w=700&q=80'
      }
    ];

    const answers = {};
    let currentIndex = 0;

    const startBtn = document.getElementById('startQuiz');
    const questionCard = document.getElementById('questionCard');
    const resultCard = document.getElementById('resultCard');
    const optionGrid = document.getElementById('optionGrid');
    const stepLabel = document.getElementById('stepLabel');
    const progressBar = document.getElementById('progressBar');
    const questionTitle = document.getElementById('questionTitle');
    const questionDesc = document.getElementById('questionDesc');
    const nextBtn = document.getElementById('nextBtn');
    const backBtn = document.getElementById('backBtn');
    const restartBtn = document.getElementById('restartBtn');
    const resultImage = document.getElementById('resultImage');
    const resultTitle = document.getElementById('resultTitle');
    const resultMeta = document.getElementById('resultMeta');
    const resultDescription = document.getElementById('resultDescription');
    const resultHighlights = document.getElementById('resultHighlights');

    startBtn.addEventListener('click', () => {
      document.querySelector('.hero').scrollIntoView({ behavior: 'smooth', block: 'start' });
      startBtn.setAttribute('disabled', 'true');
      questionCard.hidden = false;
      renderQuestion();
    });

    nextBtn.addEventListener('click', () => {
      const currentQuestion = questions[currentIndex];
      if (!answers[currentQuestion.id]) {
        shakeCard(questionCard);
        return;
      }
      currentIndex += 1;
      if (currentIndex >= questions.length) {
        showResults();
      } else {
        renderQuestion();
      }
    });

    backBtn.addEventListener('click', () => {
      if (currentIndex === 0) return;
      currentIndex -= 1;
      renderQuestion();
    });

    restartBtn.addEventListener('click', resetQuiz);

    function renderQuestion() {
      const question = questions[currentIndex];
      questionTitle.textContent = question.title;
      questionDesc.textContent = question.description;
      stepLabel.textContent = `Frage ${currentIndex + 1} von ${questions.length}`;
      progressBar.style.width = `${((currentIndex) / questions.length) * 100}%`;

      optionGrid.innerHTML = '';
      question.options.forEach(option => {
        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'option';
        if (answers[question.id] === option.value) {
          button.classList.add('selected');
        }
        button.innerHTML = `
          <span class="option-title">${option.title}</span>
          <span class="option-desc">${option.description}</span>
        `;
        button.addEventListener('click', () => {
          answers[question.id] = option.value;
          [...optionGrid.children].forEach(child => child.classList.remove('selected'));
          button.classList.add('selected');
          nextBtn.focus();
        });
        optionGrid.appendChild(button);
      });

      backBtn.hidden = currentIndex === 0;
      nextBtn.textContent = currentIndex === questions.length - 1 ? 'Ergebnis anzeigen' : 'Weiter';
    }

    function shakeCard(element) {
      element.animate([
        { transform: 'translateX(0)' },
        { transform: 'translateX(-8px)' },
        { transform: 'translateX(8px)' },
        { transform: 'translateX(-4px)' },
        { transform: 'translateX(0)' }
      ], {
        duration: 400,
        easing: 'ease-in-out'
      });
    }

    async function fetchBooksFromDatabase() {
      // simuliert eine asynchrone Datenbankabfrage
      return new Promise(resolve => {
        setTimeout(() => resolve(JSON.parse(JSON.stringify(bookDatabase))), 320);
      });
    }

    async function showResults() {
      progressBar.style.width = '100%';
      questionCard.hidden = true;
      resultCard.hidden = false;
      resultCard.classList.add('active');

      const entries = await fetchBooksFromDatabase();
      const match = rankEntries(entries, answers);
      presentResult(match);
    }

    function rankEntries(entries, filters) {
      let best = null;
      let bestScore = -Infinity;

      entries.forEach(entry => {
        let score = 0;
        const highlights = [];

        if (entry.goal.includes(filters.goal)) {
          score += 2.2;
          highlights.push(`‚úîÔ∏è Passt zu deinem Ziel <strong>${goalLabel(filters.goal)}</strong>.`);
        }

        if (entry.mood.includes(filters.mood)) {
          score += 1.8;
          highlights.push(`‚úîÔ∏è Trifft deine gew√ºnschte Stimmung: <strong>${moodLabel(filters.mood)}</strong>.`);
        }

        if (entry.complexity === filters.complexity) {
          score += 1.4;
          highlights.push(`‚úîÔ∏è Genau die richtige Tiefe: <strong>${complexityLabel(filters.complexity)}</strong>.`);
        }

        if (entry.setting.includes(filters.setting)) {
          score += 1.1;
          highlights.push(`‚úîÔ∏è Setting passt: <strong>${settingLabel(filters.setting)}</strong>.`);
        }

        if (entry.length === filters.length) {
          score += 0.7;
          highlights.push(`‚úîÔ∏è Umfang entspricht <strong>${lengthLabel(filters.length)}</strong>.`);
        }

        if (entry.type === 'fachliteratur' && (filters.goal === 'career' || filters.goal === 'learn')) {
          score += 0.5;
        }
        if (entry.type === 'unterhaltung' && (filters.goal === 'escape' || filters.goal === 'emotions')) {
          score += 0.5;
        }

        if (score > bestScore) {
          bestScore = score;
          best = { entry, highlights };
        }
      });

      return best;
    }

    function presentResult(result) {
      if (!result) return;
      const { entry, highlights } = result;

      resultImage.src = entry.image;
      resultTitle.textContent = `${entry.title}`;
      resultMeta.innerHTML = `von ${entry.author} ¬∑ ${entry.type === 'fachliteratur' ? 'Fachliteratur' : 'Unterhaltung'}`;
      resultDescription.textContent = entry.description;
      resultHighlights.innerHTML = highlights.map(item => `<span>${item}</span>`).join('');
      restartBtn.focus();
    }

    function resetQuiz() {
      Object.keys(answers).forEach(key => delete answers[key]);
      currentIndex = 0;
      resultCard.hidden = true;
      resultCard.classList.remove('active');
      questionCard.hidden = false;
      progressBar.style.width = '0%';
      nextBtn.textContent = 'Weiter';
      renderQuestion();
    }

    function goalLabel(value) {
      return {
        career: 'beruflich wachsen',
        learn: 'etwas Neues lernen',
        escape: 'abschalten & abtauchen',
        emotions: 'Gef√ºhl & Inspiration'
      }[value];
    }

    function moodLabel(value) {
      return {
        motivated: 'energiegeladen',
        calm: 'ruhig & reflektiert',
        thrilling: 'spannend',
        wonder: 'magisch & vision√§r'
      }[value];
    }

    function complexityLabel(value) {
      return {
        light: 'leicht & zug√§nglich',
        medium: 'gut strukturiert',
        deep: 'anspruchsvoll'
      }[value];
    }

    function settingLabel(value) {
      return {
        realistic: 'reale Gegenwart',
        future: 'Zukunft & Technik',
        historical: 'Geschichte & Vergangenheit',
        fantasy: 'fantastische Welten'
      }[value];
    }

    function lengthLabel(value) {
      return {
        short: 'Kurzformat',
        standard: 'ausgewogenem Umfang',
        long: 'epischer Lesezeit'
      }[value];
    }
  </script>
</body>
</html>
